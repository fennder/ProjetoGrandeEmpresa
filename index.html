<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üö® ULTIMATO DA REFORMA | Baiano MC Constru√ß√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        header {
            width: 200%;
            height: 100px;
            position: relative;
            background-image: url("CaminhaoBaianao.png");
            background-position: center;
            background-repeat: no-repeat;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d0d0d; /* Darker black for construction feel */
        }
        .text-shadow-gold {
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.7);
        }
        .bg-construction {
            background-color: #1a1a1a;
            /* Placeholder for a construction/material background texture if needed, using dark gray */
        }
        .countdown-item {
            background-color: rgba(255, 215, 0, 0.1); /* Gold tint for festive touch */
            backdrop-filter: blur(5px);
        }
        .cta-final-button {
            animation: pulse-green 1.5s infinite;
        }
        @keyframes pulse-green {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(52, 211, 153, 0.7); 
            }
            50% {
                box-shadow: 0 0 0 10px rgba(52, 211, 153, 0);
            }
        }
        .christmas-accent {
            color: #ef4444; /* Red-500 */
        }
        /* Estilo para a √°rea de resultados do LLM */
        .llm-result-card {
            background-color: #000000;
            border: 2px solid #FEF3C7; /* Yellow-100 */
        }
    </style>
    <!-- Paleta: Preto (fundo), Vermelho (Natal e Urg√™ncia), Amarelo-Ouro (Luxo e 25 Anos), Verde (CTA). -->
    <!-- Foco: Transformar R$ 300,00 na "chave" para a reforma dos sonhos. -->
</head>
<body class="bg-black text-white min-h-screen">

    <!-- Hero Section: REFORMA OU NADA! -->
    <header class="w-full flex flex-col justify-center items-center text-center p-6 py-20 md:py-32 bg-construction border-b-4 border-yellow-400">
        <div class="max-w-5xl">
            <p class="text-2xl md:text-3xl font-black mb-4 christmas-accent uppercase">
              <!--  25 ANOS: O NATAL DA GRANDE REFORMA üõ†Ô∏è -->
            </p>
            <h1 class="text-6xl md:text-8xl lg:text-9xl font-black uppercase leading-tight">
                <!--<span class="text-yellow-400 text-shadow-gold block">Caminh√£o de</span>
                <span class="text-white block mt-2">Produtos</span>-->
            </h1>
            <p class="text-xl md:text-3xl text-gray-300 mt-6 max-w-4xl mx-auto font-bold">
                CHEGA DE ADIAR! Seu projeto de casa nova e acabamento premium come√ßa AGORA. Pre√ßos de Black Friday valendo s√≥ <span class="christmas-accent">AT√â DIA 15 DE DEZEMBRO</span>.
            </p>
        </div>
    </header>

    <!-- Urgency Section (Countdown) -->
    <section class="py-12 px-6 bg-black text-center border-b border-red-600">
        <div class="max-w-5xl mx-auto">
            <h2 class="text-3xl md:text-4xl font-extrabold mb-6 christmas-accent uppercase">
                üö® TEMPO DE CONSTRU√á√ÉO LIMITADO! üö®
            </h2>
            <div id="countdown" class="flex justify-center space-x-3 md:space-x-8 text-white">
                <div class="p-3 md:p-6 rounded-lg countdown-item w-20 md:w-28 border border-yellow-400">
                    <span id="days" class="text-4xl md:text-5xl font-extrabold">00</span>
                    <span class="block text-xs md:text-base font-bold uppercase">Dias</span>
                </div>
                <div class="p-3 md:p-6 rounded-lg countdown-item w-20 md:w-28 border border-yellow-400">
                    <span id="hours" class="text-4xl md:text-5xl font-extrabold">00</span>
                    <span class="block text-xs md:text-base font-bold uppercase">Horas</span>
                </div>
                <div class="p-3 md:p-6 rounded-lg countdown-item w-20 md:w-28 border border-yellow-400">
                    <span id="minutes" class="text-4xl md:text-5xl font-extrabold">00</span>
                    <span class="block text-xs md:text-base font-bold uppercase">Minutos</span>
                </div>
                <div class="p-3 md:p-6 rounded-lg countdown-item w-20 md:w-28 border border-yellow-400">
                    <span id="seconds" class="text-4xl md:text-5xl font-extrabold">00</span>
                    <span class="block text-xs md:text-base font-bold uppercase">Segundos</span>
                </div>
            </div>
            <p class="text-lg text-red-500 mt-6 font-black">
                A OFERTA ACABA DIA 15 DE DEZEMBRO. N√ÉO CONTE COM A SORTE!
            </p>
        </div>
    </section>

    <!-- Regra de Ouro: A CHAVE PARA O DESCONTO -->
    <section class="py-16 px-6 bg-red-800 text-center">
        <div class="max-w-4xl mx-auto border-4 border-yellow-400 p-8 rounded-xl shadow-2xl bg-red-700">
            <h2 class="text-4xl md:text-6xl font-black uppercase text-yellow-400 text-shadow-gold mb-4">
                VOC√ä TEM O PODER DE REFORMAR!
            </h2>
            <p class="text-xl md:text-3xl font-bold text-white mb-6">
                Para encher o seu <span class="text-yellow-400">CAMINH√ÉO DE PRODUTOS</span> com pre√ßo de OUTLET, sua nota precisa ser:
            </p>
            <div class="inline-block bg-black p-4 rounded-lg">
                <p class="text-4xl md:text-5xl font-black text-white">
                    COMPRAS ACIMA DE <span class="text-green-500">R$ 300,00</span>
                </p>
            </div>
            <p class="text-lg text-gray-200 mt-6 font-bold">
                √â a condi√ß√£o m√≠nima para voc√™ iniciar a obra e ter a casa que merece em 2026.
            </p>
        </div>
    </section>
    
    <!-- Oportunidade da Reforma: Convocar o Cliente -->
    <section class="py-20 px-6 bg-construction">
        <div class="max-w-6xl mx-auto">
            <h2 class="text-4xl font-extrabold text-center mb-12 text-yellow-400">
                O QUE VOC√ä VAI CONSTRUIR AGORA? üè†
            </h2>
            <p class="text-xl text-gray-300 text-center mb-10 max-w-4xl mx-auto font-semibold">
                Imagine: Piso novo, banheiro reformado, churrasqueira instalada. Todos os materiais de acabamento e constru√ß√£o que voc√™ precisa para **MUDAR SUA VIDA** est√£o aqui com o pre√ßo mais baixo do ano. N√ÉO √â S√ì DESCONTO, √â A SUA CHANCE.
            </p>

            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 text-center">

                <!-- Exemplo 1: Pisos e Revestimentos -->
                <div class="p-4 rounded-xl border border-gray-800 bg-gray-900">
                    <span class="text-5xl block mb-3">üß±</span>
                    <h3 class="text-xl font-bold text-white mb-1">Pisos e Acabamento</h3>
                    <p class="text-sm text-gray-400 mb-2">Renove 100% da sua √°rea social.</p>
                    <span class="text-3xl font-black text-yellow-400">DESCONTO LIBERADO*</span>
                </div>

                <!-- Exemplo 2: Tintas e Cores -->
                <div class="p-4 rounded-xl border border-gray-800 bg-gray-900">
                    <span class="text-5xl block mb-3">üé®</span>
                    <h3 class="text-xl font-bold text-white mb-1">Tintas Premium</h3>
                    <p class="text-sm text-gray-400 mb-2">Qualidade e cores para o Natal.</p>
                    <span class="text-3xl font-black text-yellow-400">DESCONTO LIBERADO*</span>
                </div>

                <!-- Exemplo 3: Ferramentas -->
                <div class="p-4 rounded-xl border border-gray-800 bg-gray-900">
                    <span class="text-5xl block mb-3">üî©</span>
                    <h3 class="text-xl font-bold text-white mb-1">Ferramentas Essenciais</h3>
                    <p class="text-sm text-gray-400 mb-2">Tudo para sua obra n√£o parar.</p>
                    <span class="text-3xl font-black text-yellow-400">DESCONTO LIBERADO*</span>
                </div>

                <!-- Exemplo 4: Hidr√°ulica e El√©trica -->
                <div class="p-4 rounded-xl border border-gray-800 bg-gray-900">
                    <span class="text-5xl block mb-3">üöø</span>
                    <h3 class="text-xl font-bold text-white mb-1">Hidr√°ulica/El√©trica</h3>
                    <p class="text-sm text-gray-400 mb-2">Seguran√ßa e durabilidade garantidas.</p>
                    <span class="text-3xl font-black text-yellow-400">DESCONTO LIBERADO*</span>
                </div>
            </div>
            <p class="text-sm text-gray-500 text-center mt-6">*Pre√ßos de Black Friday v√°lidos somente para notas fiscais a partir de R$ 300,00.</p>
        </div>
    </section>

    <!-- Final CTA Section: CHAMADO √Ä A√á√ÉO EXTREMA -->
    <section class="py-24 px-6 text-center bg-red-600">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-4xl md:text-5xl font-black text-yellow-400 text-shadow-gold mb-6 uppercase">
                PARE DE PENSAR E COMECE A CONSTRUIR!
            </h2>
            <p class="text-xl text-white mb-10 font-bold">
                O Baian√£o s√≥ faz isso uma vez por ano. O prazo expira dia 15. Clique, monte seu or√ßamento de R$ 300,00 e garanta o desconto para sua REFORMA.
            </p>
            <a href="https://wa.me/5511999998888?text=URGENTE!%20Vim%20pela%20promo√ß√£o%20de%20Natal%20acima%20de%20R%24300%2C00.%20Quero%20fazer%20minha%20reforma%20agora!" 
               target="_blank" 
               class="inline-block bg-green-500 text-black text-3xl md:text-4xl font-black py-6 px-16 rounded-2xl shadow-2xl transition-transform transform hover:scale-105 hover:bg-green-400 border-4 border-green-700 cta-final-button">
                CLIQUE AQUI E ORGANIZE MINHA OBRA üì≤
            </a>
            <p class="text-sm text-gray-200 mt-6 font-black">DIA 15 DE DEZEMBRO √â O LIMITE. N√ÉO HAVER√Å SEGUNDA CHANCE.</p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-10 px-6 text-center text-gray-500 border-t border-gray-800">
        <p>¬© 2025 Baiano MC Materiais de Constru√ß√£o. Celebra√ß√£o 25 Anos.</p>
    </footer>

    <script>
        // Configura√ß√£o do Cron√¥metro para 15 de Dezembro de 2025
        (function() {
            const targetDate = new Date("Dec 15, 2025 23:59:59").getTime();

            const countdownElement = document.getElementById('countdown');
            if (!countdownElement) return;

            const daysEl = document.getElementById('days');
            const hoursEl = document.getElementById('hours');
            const minutesEl = document.getElementById('minutes');
            const secondsEl = document.getElementById('seconds');

            const timer = setInterval(function() {
                const now = new Date().getTime();
                const distance = targetDate - now;

                if (distance < 0) {
                    clearInterval(timer);
                    countdownElement.innerHTML = '<h3 class="text-4xl font-extrabold text-red-700">OFERTA EXPIRADA!</h3>';
                    return;
                }

                const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                daysEl.innerText = String(days).padStart(2, '0');
                hoursEl.innerText = String(hours).padStart(2, '0');
                minutesEl.innerText = String(minutes).padStart(2, '0');
                secondsEl.innerText = String(seconds).padStart(2, '0');

            }, 1000);
        })();


        // --- Fun√ß√£o de Integra√ß√£o Gemini API ---

        /**
         * Gera o plano de reforma com materiais e etapas usando a Gemini API.
         * @param {string} prompt Descri√ß√£o do projeto de reforma fornecida pelo usu√°rio.
         * @returns {Promise<Object|null>} Objeto JSON estruturado com o plano de reforma, ou null em caso de erro.
         */
        async function callGeminiApi(prompt) {
            const systemPrompt = "Voc√™ √© um assistente de planejamento de obras e reformas do Baiano MC, uma loja de materiais de constru√ß√£o e acabamento. Sua tarefa √© analisar o pedido do cliente e gerar um plano de reforma estruturado em JSON. Seja pr√°tico e direto, sugerindo materiais de constru√ß√£o comuns (pisos, tintas, cimento, lou√ßas, etc.) e as etapas b√°sicas da obra.";
            const userQuery = `Gere um plano de reforma e lista de materiais essenciais baseado na seguinte descri√ß√£o: ${prompt}`;
            const apiKey = ""; // Ser√° fornecida pelo ambiente em tempo de execu√ß√£o
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            // Esquema JSON para garantir a resposta estruturada
            const responseSchema = {
                type: "OBJECT",
                properties: {
                    "tituloProjeto": { "type": "STRING", "description": "Um t√≠tulo atraente para o projeto de reforma." },
                    "resumoMotivacional": { "type": "STRING", "description": "Um resumo conciso (1-2 frases) e motivacional sobre a reforma." },
                    "materiaisSugeridos": {
                        "type": "ARRAY",
                        "items": { "type": "STRING", "description": "Material essencial para a obra (ex: '30m¬≤ de Porcelanato Retificado', '10 Sacos de Cimento Votorantim')." }
                    },
                    "etapasChave": {
                        "type": "ARRAY",
                        "items": { "type": "STRING", "description": "Passos principais para a execu√ß√£o da reforma (ex: 'Prepara√ß√£o do contrapiso')." }
                    }
                },
                required: ["tituloProjeto", "resumoMotivacional", "materiaisSugeridos", "etapasChave"]
            };

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                config: {
                    responseMimeType: "application/json",
                    responseSchema: responseSchema
                }
            };

            let response = null;
            let maxRetries = 5;
            let delay = 1000;

            for (let i = 0; i < maxRetries; i++) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        break; // Sucesso, sai do loop
                    } else if (response.status === 429) {
                        // Too Many Requests - Implementa Backoff Exponencial
                        if (i < maxRetries - 1) {
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                        } else {
                            throw new Error("Erro de taxa de limite (429) ap√≥s m√∫ltiplas tentativas.");
                        }
                    } else {
                        // Outros erros HTTP
                        throw new Error(`Erro HTTP: ${response.status}`);
                    }
                } catch (error) {
                    if (i === maxRetries - 1) {
                        console.error("Erro final ao chamar a API Gemini:", error);
                        return null;
                    }
                }
            }

            if (!response || !response.ok) return null;

            const result = await response.json();
            const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;

            if (jsonText) {
                try {
                    return JSON.parse(jsonText);
                } catch (e) {
                    console.error("Erro ao fazer parse do JSON da API:", e);
                    return null;
                }
            }
            return null;
        }

        /**
         * Fun√ß√£o principal para iniciar o plano e atualizar a UI.
         */
        async function generateReformPlan() {
            const descriptionEl = document.getElementById('project-description');
            const loadingEl = document.getElementById('loading-indicator');
            const resultsAreaEl = document.getElementById('results-area');
            const generateBtn = document.getElementById('generate-plan-btn');

            const prompt = descriptionEl.value.trim();

            if (prompt.length < 15) {
                alertMessage("Por favor, descreva seu projeto com mais detalhes (m√≠nimo 15 caracteres).");
                return;
            }

            // UI: Iniciar carregamento
            loadingEl.classList.remove('hidden');
            resultsAreaEl.classList.add('hidden');
            generateBtn.disabled = true;
            generateBtn.textContent = 'Gerando Plano...';

            const plan = await callGeminiApi(prompt);

            // UI: Finalizar carregamento
            loadingEl.classList.add('hidden');
            generateBtn.disabled = false;
            generateBtn.textContent = 'GERAR MEU PLANO DE REFORMA';

            if (plan) {
                updateResultsUI(plan, prompt);
                resultsAreaEl.classList.remove('hidden');
            } else {
                alertMessage("Ops! N√£o foi poss√≠vel gerar o plano. Tente uma descri√ß√£o diferente.");
                resultsAreaEl.classList.add('hidden');
            }
        }

        /**
         * Atualiza a interface com os resultados do plano de reforma.
         * @param {Object} plan Objeto JSON com o plano.
         * @param {string} originalPrompt O prompt original do usu√°rio.
         */
        function updateResultsUI(plan, originalPrompt) {
            document.getElementById('project-title').textContent = plan.tituloProjeto;
            document.getElementById('project-motto').textContent = plan.resumoMotivacional;
            
            const materialsList = document.getElementById('materials-list');
            materialsList.innerHTML = '';
            plan.materiaisSugeridos.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                materialsList.appendChild(li);
            });

            const stepsList = document.getElementById('steps-list');
            stepsList.innerHTML = '';
            plan.etapasChave.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                stepsList.appendChild(li);
            });

            // Atualiza o link do WhatsApp com o t√≠tulo do projeto para rastreamento
            const projectTitle = encodeURIComponent(plan.tituloProjeto.substring(0, 50));
            const newWhatsappLink = `https://wa.me/5511999998888?text=URGENTE!%20Meu%20projeto%20√©%20${projectTitle}%20e%20preciso%20montar%20meu%20carrinho%20de%20R%24300%2C00%20agora!`;
            document.getElementById('whatsapp-cta-project').href = newWhatsappLink;
        }
        
        /**
         * Exibe uma mensagem de erro ou alerta.
         * @param {string} message A mensagem a ser exibida.
         */
        function alertMessage(message) {
            // Implementa√ß√£o de um modal ou mensagem customizada, substituindo o alert()
            // Por simplicidade na Landing Page, usaremos console.error, mas um modal seria ideal.
            console.error("ALERTA: " + message);
            const errorEl = document.getElementById('loading-indicator');
            errorEl.classList.remove('hidden');
            errorEl.textContent = "ALERTA: " + message;
            setTimeout(() => { errorEl.classList.add('hidden'); }, 4000);
        }
    </script>

</body>
</html>
